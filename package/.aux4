{
  "scope": "aux4",
  "name": "db-postgres",
  "version": "1.1.0",
  "description": "postgres database tools",
  "tags": [
    "db",
    "database",
    "postgres"
  ],
  "dependencies": [
    "aux4/db"
  ],
  "profiles": [
    {
      "name": "db",
      "commands": [
        {
          "name": "postgres",
          "execute": [
            "profile:db:postgres"
          ],
          "help": {
            "text": "postgres database tools"
          }
        }
      ]
    },
    {
      "name": "db:postgres",
      "commands": [
        {
          "name": "execute",
          "execute": [
            "stdin:aux4 db driver execute params(query, file, inputStream, tx, ignore) --params value(*) | node ${packageDir}/lib/aux4-db-postgres.js values(host, port, database, user, password)"
          ],
          "help": {
            "text": "Execute a query on the postgres database",
            "variables": [
              {
                "name": "host",
                "text": "Database host",
                "default": "localhost"
              },
              {
                "name": "port",
                "text": "Database port",
                "default": "5432"
              },
              {
                "name": "database",
                "text": "Database name",
                "default": "postgres"
              },
              {
                "name": "user",
                "text": "Database user",
                "default": "postgres"
              },
              {
                "name": "password",
                "text": "Database password"
              },
              {
                "name": "query",
                "text": "SQL query to execute",
                "default": "",
                "arg": true
              },
              {
                "name": "file",
                "text": "SQL file to execute",
                "default": ""
              },
              {
                "name": "inputStream",
                "text": "Read JSON input from stdin",
                "default": "false"
              },
              {
                "name": "tx",
                "text": "Use transaction for batch operations",
                "default": "false"
              },
              {
                "name": "ignore",
                "text": "Ignore errors and continue processing",
                "default": "false"
              }
            ]
          }
        },
        {
          "name": "stream",
          "execute": [
            "stdin:aux4 db driver stream params(query, file, inputStream, tx, ignore) --params value(*) | node ${packageDir}/lib/aux4-db-postgres.js values(host, port, database, user, password)"
          ],
          "help": {
            "text": "Execute a query on the postgres database and stream results",
            "variables": [
              {
                "name": "host",
                "text": "Database host",
                "default": "localhost"
              },
              {
                "name": "port",
                "text": "Database port",
                "default": "5432"
              },
              {
                "name": "database",
                "text": "Database name",
                "default": "postgres"
              },
              {
                "name": "user",
                "text": "Database user",
                "default": "postgres"
              },
              {
                "name": "password",
                "text": "Database password"
              },
              {
                "name": "query",
                "text": "SQL query to execute",
                "default": ""
              },
              {
                "name": "file",
                "text": "SQL file to execute",
                "default": ""
              },
              {
                "name": "inputStream",
                "text": "Read JSON input from stdin",
                "default": "false"
              },
              {
                "name": "tx",
                "text": "Use transaction for batch operations",
                "default": "false"
              },
              {
                "name": "ignore",
                "text": "Ignore errors and continue processing",
                "default": "false"
              }
            ]
          }
        }
      ]
    }
  ]
}
